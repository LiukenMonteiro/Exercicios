(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();function a(o){const e=document.querySelector("#users-select");o.map(s=>{const r=document.createElement("option");r.setAttribute("value",s.id),r.innerText=s.firstName,e.appendChild(r)})}function m(o){if(o.length===0)return;const e=document.querySelector("#posts-section"),s=document.querySelector("#featured-post-title"),r=document.querySelector("#featured-post-body"),t=document.querySelector("#related-posts-section");e.classList.remove("invisible");const n=[...o],c=n.pop();if(s.innerText=c.title,r.innerText=c.body,n.length===0)return;const i=document.createElement("h2");i.innerText="Related posts",t.appendChild(i),n.map(d=>{const l=document.createElement("p");l.innerText=d.title,t.appendChild(l)})}function f(o){if(o.length===0)return;const e=document.querySelector("#featured-post-comments"),s=document.createElement("h3");s.innerText="Comments",e.appendChild(s),o.map(r=>{const t=document.createElement("p");t.innerText=r.body,e.appendChild(t)})}function p(o){const e=document.querySelector("#error-message");e.classList.remove("invisible"),e.innerText=o}function y(){const o=document.querySelector("#posts-section"),e=document.querySelector("#featured-post-title"),s=document.querySelector("#featured-post-body"),r=document.querySelector("#related-posts-section"),t=document.querySelector("#featured-post-comments"),n=document.querySelector("#error-message");e.innerHTML="",s.innerHTML="",r.innerHTML="",t.innerHTML="",n.innerHTML="",o.classList.add("invisible"),n.classList.add("invisible")}const u=document.querySelector("#users-select"),h="https://dummyjson.com/users";fetch(h).then(o=>o.json()).then(o=>{const{users:e}=o;a(e)});u.addEventListener("change",()=>{y();const o=`https://dummyjson.com/posts/user/${u.value}`;fetch(o).then(e=>e.json()).then(e=>{const{posts:s}=e;m(s);const[r]=s,t=`https://dummyjson.com/posts/${r.id}/comments`;return fetch(t)}).then(e=>e.json()).then(e=>{const{comments:s}=e;f(s)}).catch(e=>{p("Error retrieving information"),console.log(e.message)})});
